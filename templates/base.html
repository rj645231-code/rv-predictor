<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="theme-color" content="#060a12">
<title>{% block title %}RV Predictor{% endblock %}</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{-webkit-tap-highlight-color:transparent}
:root{
  --bg:#060a12;
  --c1:#0b1120;
  --c2:#101828;
  --c3:#182035;
  --br:#1c2b40;
  --br2:#243550;
  --amber:#f59e0b;
  --gold:#fcd34d;
  --green:#10b981;
  --red:#f43f5e;
  --blue:#3b82f6;
  --cyan:#22d3ee;
  --purple:#a78bfa;
  --txt:#e8edf5;
  --t2:#5b6e8a;
  --t3:#2a3a52;
  --fn:'DM Sans',sans-serif;
  --fm:'JetBrains Mono',monospace;
  --r:16px;--rs:10px;--rx:20px;
}
body{font-family:var(--fn);background:var(--bg);color:var(--txt);min-height:100vh;max-width:500px;margin:0 auto;padding-bottom:80px}

/* TOPBAR */
.topbar{position:sticky;top:0;z-index:100;height:60px;display:flex;align-items:center;padding:0 18px;justify-content:space-between;background:rgba(6,10,18,0.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--br)}
.brand{display:flex;align-items:center;gap:11px;text-decoration:none}
.brand-logo{width:38px;height:38px;border-radius:11px;background:linear-gradient(135deg,#f59e0b,#f97316);display:flex;align-items:center;justify-content:center;font-family:var(--fm);font-size:13px;font-weight:700;color:#000;box-shadow:0 0 24px rgba(245,158,11,0.3);flex-shrink:0}
.brand-name{font-size:17px;font-weight:800;letter-spacing:-0.4px}
.brand-name b{color:var(--amber)}
.brand-sub{font-size:10px;color:var(--t2);margin-top:1px;letter-spacing:0.2px}
.live-badge{display:flex;align-items:center;gap:5px;font-family:var(--fm);font-size:10px;font-weight:700;color:var(--green);background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.22);border-radius:20px;padding:5px 11px}
.ldot{width:5px;height:5px;border-radius:50%;background:var(--green);animation:pulse 2s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.2}}

/* BOTTOM NAV */
.bnav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:500px;z-index:200;background:rgba(6,10,18,0.98);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-top:1px solid var(--br);display:grid;grid-template-columns:repeat(4,1fr);padding:8px 0 max(8px,env(safe-area-inset-bottom))}
.nb{display:flex;flex-direction:column;align-items:center;gap:3px;padding:4px 2px;text-decoration:none;color:var(--t3);font-family:var(--fn);font-size:9px;font-weight:700;letter-spacing:0.6px;text-transform:uppercase;transition:color 0.2s}
.nb.on,.nb:hover{color:var(--amber)}
.ni{font-size:20px;line-height:1}

/* LAYOUT */
.wrap{padding:16px}
.gap{margin-bottom:12px}

/* SECTION TITLE */
.sec{font-family:var(--fm);font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--t2);margin:22px 0 10px;display:flex;align-items:center;gap:10px}
.sec::after{content:'';flex:1;height:1px;background:var(--br)}

/* CARD */
.card{background:var(--c1);border:1px solid var(--br);border-radius:var(--r);overflow:hidden;margin-bottom:12px}
.cp{padding:16px}

/* STAT ROW */
.sr{display:flex;justify-content:space-between;align-items:center;padding:11px 16px;border-bottom:1px solid var(--br)}
.sr:last-child{border-bottom:none}
.sr-l{font-size:12px;color:var(--t2)}
.sr-v{font-family:var(--fm);font-size:13px;font-weight:700}

/* PILLS */
.pill{display:inline-flex;align-items:center;border-radius:20px;padding:4px 10px;font-family:var(--fm);font-size:10px;font-weight:700;white-space:nowrap}
.p-s{background:rgba(245,158,11,0.13);color:var(--amber);border:1px solid rgba(245,158,11,0.28)}
.p-b{background:rgba(16,185,129,0.11);color:var(--green);border:1px solid rgba(16,185,129,0.22)}
.p-w{background:rgba(91,110,138,0.1);color:var(--t2);border:1px solid rgba(91,110,138,0.2)}
.p-a{background:rgba(244,63,94,0.1);color:var(--red);border:1px solid rgba(244,63,94,0.22)}

/* SELECT */
.sel{width:100%;padding:13px 16px;background:var(--c2);border:1px solid var(--br);border-radius:var(--r);color:var(--txt);font-family:var(--fn);font-size:14px;font-weight:600;outline:none;cursor:pointer;appearance:none;transition:border-color 0.2s}
.sel:focus{border-color:var(--amber)}

/* RANGE TABS */
.rtabs{display:flex;gap:6px;margin-bottom:14px}
.rtab{flex:1;padding:9px 4px;text-align:center;background:var(--c1);border:1px solid var(--br);border-radius:var(--rs);font-family:var(--fm);font-size:11px;font-weight:700;color:var(--t2);cursor:pointer;transition:all 0.18s}
.rtab.on{background:var(--amber);border-color:var(--amber);color:#000}

/* CHART WRAP */
.cw{background:var(--c2);border-radius:var(--rs);padding:14px 12px 10px}
.cl{font-family:var(--fm);font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:var(--t2);margin-bottom:10px}

/* COLORS */
.pos{color:var(--green)}.neg{color:var(--red)}.neu{color:var(--t2)}.acc{color:var(--amber)}

/* LOADER */
.ld{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:14px;color:var(--t2);font-size:13px}
.sp{width:28px;height:28px;border:3px solid var(--br);border-top-color:var(--amber);border-radius:50%;animation:spin 0.7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.er{background:rgba(244,63,94,0.08);border:1px solid rgba(244,63,94,0.2);border-radius:var(--r);padding:20px;text-align:center;color:var(--red);font-size:13px;margin:12px 0}

/* ANIM */
@keyframes up{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.an{animation:up 0.35s ease both}
</style>
{% block xs %}{% endblock %}
</head>
<body>
<div class="topbar">
  <a class="brand" href="/">
    <div class="brand-logo">RV</div>
    <div>
      <div class="brand-name">RV <b>Predictor</b></div>
      <div class="brand-sub">AI Mandi Intelligence</div>
    </div>
  </a>
  <div class="live-badge"><div class="ldot"></div>LIVE</div>
</div>

<div class="wrap">
{% block content %}{% endblock %}
</div>

<nav class="bnav">
  <a href="/"        class="nb {% if active=='home'    %}on{% endif %}"><span class="ni">üè†</span>Home</a>
  <a href="/mandi"   class="nb {% if active=='mandi'   %}on{% endif %}"><span class="ni">üè™</span>Mandi</a>
  <a href="/compare" class="nb {% if active=='compare' %}on{% endif %}"><span class="ni">‚öñÔ∏è</span>Compare</a>
  <a href="/history" class="nb {% if active=='history' %}on{% endif %}"><span class="ni">üìÖ</span>History</a>
</nav>

<script>
Chart.defaults.color='#5b6e8a';
Chart.defaults.borderColor='#1c2b40';
Chart.defaults.font.family="'JetBrains Mono',monospace";
Chart.defaults.font.size=10;

function pc(s){
  if(!s)return'p-w';
  if(s.includes('STRONG BUY')||s.includes('BUY TODAY'))return'p-s';
  if(s.includes('BUY'))return'p-b';
  if(s.includes('AVOID'))return'p-a';
  return'p-w';
}
function ss(s){
  if(!s)return'‚Äî';
  return s.replace(/[üî•üü¢‚è≥‚õîüî¥‚ö†Ô∏èüìäüìàüìâüîÄ]/gu,'').trim().split('‚Äî')[0].trim().slice(0,20);
}
function fp(v){return v?'‚Çπ'+Number(v).toLocaleString('en-IN',{maximumFractionDigits:0}):'‚Äî';}
function fr(v){if(v==null)return'‚Äî';const n=Number(v);return(n>=0?'+':'')+n.toFixed(1)+'%';}
function rc(v){return Number(v)>0.2?'pos':Number(v)<-0.2?'neg':'neu';}
</script>
{% block scripts %}{% endblock %}
</body>
</html>
